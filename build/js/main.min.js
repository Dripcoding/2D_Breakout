!function(){"use strict";var o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),t=function(){function t(){o(this,t),this.canvas=document.getElementById("myCanvas"),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height}return s(t,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"detectEdgeCollisions",value:function(t,e,i){t.y+t.dy<t.ballRadius?(t.dy=-t.dy,t.changeColor()):t.y+t.dy>this.height-t.ballRadius&&(t.x>e.paddleX&&t.x<e.paddleX+e.paddleWidth?(t.dy=-t.dy,t.changeColor()):(i.lives--,0===i.lives?(alert("Game Over"),document.location.reload()):(t.x=this.width/2,t.y=this.height-30,t.dx=2,t.dy=-2,e.paddleX=(this.width-e.paddleWidth)/2))),(t.x+t.dx<t.ballRadius||t.x+t.dx>this.width-t.ballRadius)&&(t.dx=-t.dx,t.changeColor())}},{key:"detectBrickCollisions",value:function(t,e,i){for(var n=0;n<e.brickColumnCount;n++)for(var o=0;o<e.brickRowCount;o++){var s=e.bricks[n][o];1===s.status&&t.x>s.x&&t.x<s.x+e.brickWidth&&t.y>s.y&&t.y<s.y+e.brickHeight&&(t.dy=-t.dy,t.changeColor(),s.status=0,i.score++,i.score==e.brickRowCount*e.brickColumnCount&&(alert("You Win! Congrats!"),document.location.reload()))}}}]),t}(),i=function(){function n(t,e,i){o(this,n),this.ballColor="#0095DD",this.x=e/2,this.y=t-30,this.ballRadius=10,this.dx=i.dx,this.dy=i.dy}return s(n,[{key:"changeColor",value:function(){var t="rgb("+256*Math.random()+", "+256*Math.random()+", "+256*Math.random()+")";this.ballColor=t}},{key:"drawBall",value:function(t){t.ctx.beginPath(),t.ctx.arc(this.x,this.y,this.ballRadius,0,2*Math.PI),t.ctx.fillStyle=this.ballColor,t.ctx.fill(),t.ctx.closePath()}},{key:"update",value:function(){this.x+=this.dx,this.y+=this.dy}}]),n}(),e=function(){function i(){o(this,i),this.brickColor="#0095DD",this.brickRowCount=10,this.brickColumnCount=7,this.brickWidth=75,this.brickHeight=20,this.brickPadding=10,this.brickOffsetTop=50,this.brickOffsetLeft=160,this.bricks=[];for(var t=0;t<this.brickColumnCount;t++){this.bricks[t]=[];for(var e=0;e<this.brickRowCount;e++)this.bricks[t][e]={x:0,y:0,status:1}}}return s(i,[{key:"drawBricks",value:function(t){for(var e=0;e<this.brickColumnCount;e++)for(var i=0;i<this.brickRowCount;i++){var n=this.bricks[e][i];if(1===n.status){var o=e*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft,s=i*(this.brickHeight+this.brickPadding)+this.brickOffsetTop;n.x=o,n.y=s,t.ctx.beginPath(),t.ctx.rect(n.x,n.y,this.brickWidth,this.brickHeight),t.ctx.fillStyle=this.brickColor,t.ctx.fill(),t.ctx.closePath()}}}}]),i}(),n=function(){function e(t){o(this,e),this.paddleColor="#0095DD",this.paddleHeight=10,this.paddleWidth=75,this.paddleX=(t.width-this.paddleWidth)/2}return s(e,[{key:"drawPaddle",value:function(t){t.ctx.beginPath(),t.ctx.rect(this.paddleX,t.height-this.paddleHeight,this.paddleWidth,this.paddleHeight),t.ctx.fillStyle=this.paddleColor,t.ctx.fill(),t.ctx.closePath()}},{key:"update",value:function(t){this.paddleX+=t}}]),e}(),a=function(){function e(t){o(this,e),this.lives=t.lives,this.score=0,this.opponentScore=0,this.opponentLives=0,this.x=0,this.y=0}return s(e,[{key:"drawScore",value:function(t){t.ctx.font="24px Arial",t.ctx.fillStyle="#0095DD",t.ctx.fillText("Score: "+this.score,8,20),t.ctx.fillText("Opponent's Score: "+this.opponentScore,8,40)}},{key:"drawLives",value:function(t){t.ctx.font="24px Arial",t.ctx.fillStyle="#0095DD",t.ctx.fillText("Lives: "+this.lives,t.width-90,20),t.ctx.fillText("Opponent's Lives: "+this.opponentLives,t.width-218,40)}},{key:"update",value:function(t,e,i){this.lives+=t,this.username=e,this.score+=i}}]),e}(),d=io.connect("https://breakout-2d.herokuapp.com");document.write('<script src="https://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"><\/script>');var r=function(){function t(){o(this,t),this.rightPressed=!1,this.leftPressed=!1,this.players=[],window.addEventListener("keydown",this.keyDownHandler,!1),window.addEventListener("keyup",this.keyUpHandler,!1),window.addEventListener("mousemove",this.mouseMoveHandler,!1),h.addEventListener("click",v,!1),u.addEventListener("click",v,!1),y.addEventListener("click",v,!1),f.addEventListener("click",v,!1)}return s(t,[{key:"init",value:function(){var t=this;requestAnimationFrame(function(){return t.draw(k)})}},{key:"draw",value:function(t){var e=this;console.log("MODE "+c.name),t.clear(),t.ctx.beginPath(),x.drawPaddle(t),m.drawBricks(t),p.drawBall(t),w.drawScore(t),w.drawLives(t),t.detectBrickCollisions(p,m,w),t.detectEdgeCollisions(p,x,w),d.emit("playerScored",w),d.emit("playerLife",w),this.rightPressed&&x.paddleX<t.width-x.paddleWidth?x.update(7):this.leftPressed&&0<x.paddleX&&x.update(-7),p.update(),!1===l&&requestAnimationFrame(function(){e.draw(t)})}},{key:"keyDownHandler",value:function(t){39===t.keyCode?b.rightPressed=!0:37===t.keyCode?b.leftPressed=!0:80===t.keyCode?!1===(l=!l)&&b.init():81===t.keyCode&&(console.log("player quit game"),alert("You quit. Game Over!"),document.location.reload())}},{key:"keyUpHandler",value:function(t){39===t.keyCode?b.rightPressed=!1:37===t.keyCode&&(b.leftPressed=!1)}},{key:"mouseMoveHandler",value:function(t){var e=t.clientX-k.canvas.offsetLeft;0<e&&e<k.width&&(x.paddleX=e-x.paddleWidth/2)}}]),t}(),l=!0,c={name:"very easy",dx:1.5,dy:-1.5,lives:5},h=document.querySelector(".easy-mode-btn"),u=document.querySelector(".medium-mode-btn"),y=document.querySelector(".hard-mode-btn"),f=document.querySelector(".marathon-mode-btn");function v(t){var e=t.target.name;"easy"===e?(c={name:"easy",dx:2,dy:-2,lives:3},console.log("mode changed to easy",c),p=new i(k.height,k.width,c),w=new a(c)):"medium"===e?(c={name:"medium",dx:3,dy:-3,lives:3},console.log("mode changed to medium",c),p=new i(k.height,k.width,c),w=new a(c)):"hard"===e?(c={name:"hard",dx:4,dy:-5,lives:2},console.log("mode changed to hard",c),p=new i(k.height,k.width,c),w=new a(c)):(c="marathon",console.log("mode changed to marathon",c))}var k=new t,p=new i(k.height,k.width,c),m=new e(k),x=new n(k),w=new a(c),b=new r;d.on("otherPlayerScore",function(t){w.opponentScore=t}),d.on("otherPlayerLife",function(t){w.opponentLives=t}),b.init()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL3B1YmxpYy9qcy9tb2R1bGVzL2NhbnZhcy5qcyIsIi4uLy4uL3B1YmxpYy9qcy9tb2R1bGVzL2JhbGwuanMiLCIuLi8uLi9wdWJsaWMvanMvbW9kdWxlcy9icmljay5qcyIsIi4uLy4uL3B1YmxpYy9qcy9tb2R1bGVzL3BhZGRsZS5qcyIsIi4uLy4uL3B1YmxpYy9qcy9tb2R1bGVzL3BsYXllci5qcyIsIi4uLy4uL3B1YmxpYy9qcy9tb2R1bGVzL2NsaWVudC5qcyIsIi4uLy4uL3B1YmxpYy9qcy9nYW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhbnZhcyB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcblx0XHR0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0XHR0aGlzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG5cdFx0dGhpcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG5cdH1cblxuXHRjbGVhcigpIHtcblx0XHR0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXHR9XG5cblx0Ly8gZGV0ZWN0IGNvbGxpc2lvbnMgYWdhaW5zdCBjYW52YXMgZWRnZXNcblx0ZGV0ZWN0RWRnZUNvbGxpc2lvbnMoYmFsbCwgcGFkZGxlLCBwbGF5ZXIpIHtcblx0XHQvLyBkZXRlY3QgY29sbGlzaW9ucyB3aXRoIHRvcCBlZGdlXG5cdFx0aWYgKGJhbGwueSArIGJhbGwuZHkgPCBiYWxsLmJhbGxSYWRpdXMpIHtcblx0XHRcdGJhbGwuZHkgPSAtYmFsbC5keTtcblx0XHRcdGJhbGwuY2hhbmdlQ29sb3IoKTtcblx0XHR9IGVsc2UgaWYgKGJhbGwueSArIGJhbGwuZHkgPiB0aGlzLmhlaWdodCAtIGJhbGwuYmFsbFJhZGl1cykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRiYWxsLnggPiBwYWRkbGUucGFkZGxlWCAmJlxuXHRcdFx0XHRiYWxsLnggPCBwYWRkbGUucGFkZGxlWCArIHBhZGRsZS5wYWRkbGVXaWR0aFxuXHRcdFx0KSB7XG5cdFx0XHRcdC8vIGJhbGwgY29sbGlkZXMgd2l0aCB0aGUgcGFkZGxlXG5cdFx0XHRcdGJhbGwuZHkgPSAtYmFsbC5keTtcblx0XHRcdFx0YmFsbC5jaGFuZ2VDb2xvcigpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cGxheWVyLmxpdmVzLS07XG5cdFx0XHRcdGlmIChwbGF5ZXIubGl2ZXMgPT09IDApIHtcblx0XHRcdFx0XHRhbGVydChcIkdhbWUgT3ZlclwiKTtcblx0XHRcdFx0XHRkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRiYWxsLnggPSB0aGlzLndpZHRoIC8gMjtcblx0XHRcdFx0XHRiYWxsLnkgPSB0aGlzLmhlaWdodCAtIDMwO1xuXHRcdFx0XHRcdGJhbGwuZHggPSAyO1xuXHRcdFx0XHRcdGJhbGwuZHkgPSAtMjtcblx0XHRcdFx0XHRwYWRkbGUucGFkZGxlWCA9ICh0aGlzLndpZHRoIC0gcGFkZGxlLnBhZGRsZVdpZHRoKSAvIDI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gZGV0ZWN0IGNvbGxpc2lvbiB3aXRoIGxlZnQgYW5kIHJpZ2h0IGVkZ2VzXG5cdFx0aWYgKFxuXHRcdFx0YmFsbC54ICsgYmFsbC5keCA8IGJhbGwuYmFsbFJhZGl1cyB8fFxuXHRcdFx0YmFsbC54ICsgYmFsbC5keCA+IHRoaXMud2lkdGggLSBiYWxsLmJhbGxSYWRpdXNcblx0XHQpIHtcblx0XHRcdGJhbGwuZHggPSAtYmFsbC5keDtcblx0XHRcdGJhbGwuY2hhbmdlQ29sb3IoKTtcblx0XHR9XG5cdH1cblxuXHRkZXRlY3RCcmlja0NvbGxpc2lvbnMoYmFsbCwgYnJpY2ssIHBsYXllcikge1xuXHRcdC8vIGNvbXBhcmUgcG9zaXRpb24gb2YgYnJpY2tzIHdpdGggdGhlIGJhbGwgZm9yIGV2ZXJ5IGZyYW1lXG5cdFx0Zm9yIChsZXQgY29sID0gMDsgY29sIDwgYnJpY2suYnJpY2tDb2x1bW5Db3VudDsgY29sKyspIHtcblx0XHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGJyaWNrLmJyaWNrUm93Q291bnQ7IHJvdysrKSB7XG5cdFx0XHRcdGxldCBiID0gYnJpY2suYnJpY2tzW2NvbF1bcm93XTtcblxuXHRcdFx0XHRpZiAoYi5zdGF0dXMgPT09IDEpIHtcblx0XHRcdFx0XHQvLyBhIGNvbGxpc2lvbiB3aXRoIGEgYnJpY2sgb2NjdXJzIHdoZW4gdGhlIGNlbnRlciBvZiB0aGUgYmFsbCBpcyBpbnNpZGUgYSBicmljaydzIGNvb3JkaW5hdGVzXG5cdFx0XHRcdFx0Ly8gaWYgYSBjb2xsaXNpb24gb2NjdXJzLCBjaGFuZ2UgdGhlIG1vdmVtZW50IG9mIHRoZSBiYWxsLCBhIGJyaWNrJ3Mgc3RhdHVzLCBzY29yZVxuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdGJhbGwueCA+IGIueCAmJiAvLyB4IHBvc2l0aW9uIG9mIHRoZSBiYWxsIGlzIGdyZWF0ZXIgdGhhbiB0aGUgeCBwb3NpdGlvbiBvZiB0aGUgYnJpY2tcblx0XHRcdFx0XHRcdGJhbGwueCA8IGIueCArIGJyaWNrLmJyaWNrV2lkdGggJiYgLy8geCBwb3NpdGlvbiBvZiB0aGUgYmFsbCBpcyBsZXNzIHRoYW4gdGhlIHggcG9zaXRpb24gb2YgdGhlIGJyaWNrIHBsdXMgaXRzIHdpZHRoXG5cdFx0XHRcdFx0XHRiYWxsLnkgPiBiLnkgJiYgLy8geSBwb3NpdGlvbiBvZiB0aGUgYmFsbCBpcyBncmVhdGVyIHRoYW4gdGhlIHkgcG9zaXRpb24gb2YgdGhlIGJyaWNrXG5cdFx0XHRcdFx0XHRiYWxsLnkgPCBiLnkgKyBicmljay5icmlja0hlaWdodCAvLyB5IHBvc2l0aW9uIG9mIHRoZSBiYWxsIGlzIGxlc3MgdGhhbiB0aGUgeSBwb3NpdGlvbiBvZiB0aGUgYnJpY2sgcGx1cyBpdHMgaGVpZ2h0XG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRiYWxsLmR5ID0gLWJhbGwuZHk7XG5cdFx0XHRcdFx0XHRiYWxsLmNoYW5nZUNvbG9yKCk7XG5cdFx0XHRcdFx0XHRiLnN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0XHRwbGF5ZXIuc2NvcmUrKztcblx0XHRcdFx0XHRcdGlmIChwbGF5ZXIuc2NvcmUgPT0gYnJpY2suYnJpY2tSb3dDb3VudCAqIGJyaWNrLmJyaWNrQ29sdW1uQ291bnQpIHtcblx0XHRcdFx0XHRcdFx0Ly8gZGlzcGxheSB3aW5uaW5nIG1zZyB3aGVuIHNjb3JlIGlzIGVxdWFsIHRvIHRoZSBudW1iZXIgb2YgYnJpY2tzXG5cdFx0XHRcdFx0XHRcdGFsZXJ0KFwiWW91IFdpbiEgQ29uZ3JhdHMhXCIpO1xuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzO1xuIiwiY2xhc3MgQmFsbCB7XG4gICAgY29uc3RydWN0b3IoaGVpZ2h0LCB3aWR0aCwgbW9kZSkge1xuICAgICAgICB0aGlzLmJhbGxDb2xvciA9IFwiIzAwOTVERFwiO1xuICAgICAgICAvLyBzdGFydGluZyBwb3NpdGlvblxuICAgICAgICB0aGlzLnggPSB3aWR0aCAvIDI7XG4gICAgICAgIHRoaXMueSA9IGhlaWdodCAtIDMwO1xuICAgICAgICB0aGlzLmJhbGxSYWRpdXMgPSAxMDtcbiAgICAgICAgLy8gdmVsb2NpdHkgLSBjaGFuZ2UgaW4gcG9zaXRpb25cbiAgICAgICAgdGhpcy5keCA9IG1vZGUuZHg7XG4gICAgICAgIHRoaXMuZHkgPSBtb2RlLmR5O1xuICAgIH1cblxuICAgIGNoYW5nZUNvbG9yKCkge1xuICAgICAgICBjb25zdCByZWQgPSBNYXRoLnJhbmRvbSgpICogMjU2O1xuICAgICAgICBjb25zdCBncmVlbiA9IE1hdGgucmFuZG9tKCkgKiAyNTY7XG4gICAgICAgIGNvbnN0IGJsdWUgPSBNYXRoLnJhbmRvbSgpICogMjU2O1xuICAgICAgICBjb25zdCBjb2xvciA9IGByZ2IoJHtyZWR9LCAke2dyZWVufSwgJHtibHVlfSlgO1xuICAgICAgICB0aGlzLmJhbGxDb2xvciA9IGNvbG9yO1xuICAgIH1cblxuICAgIC8vIGRyYXcgYmFsbCB0byB0aGUgY2FudmFzXG4gICAgZHJhd0JhbGwoY2FudmFzKSB7XG4gICAgICAgIGNhbnZhcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGNhbnZhcy5jdHguYXJjKHRoaXMueCwgdGhpcy55LCB0aGlzLmJhbGxSYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgY2FudmFzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhbGxDb2xvcjtcbiAgICAgICAgY2FudmFzLmN0eC5maWxsKCk7XG4gICAgICAgIGNhbnZhcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGJhbGwncyBtb3ZlbWVudFxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy54ICs9IHRoaXMuZHg7XG4gICAgICAgIHRoaXMueSArPSB0aGlzLmR5O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmFsbDtcbiIsImNsYXNzIEJyaWNrIHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0Ly8gYnJpY2sgcHJvcGVydGllc1xuXHRcdHRoaXMuYnJpY2tDb2xvciA9IFwiIzAwOTVERFwiO1xuXHRcdHRoaXMuYnJpY2tSb3dDb3VudCA9IDEwO1xuXHRcdHRoaXMuYnJpY2tDb2x1bW5Db3VudCA9IDc7XG5cdFx0dGhpcy5icmlja1dpZHRoID0gNzU7XG5cdFx0dGhpcy5icmlja0hlaWdodCA9IDIwO1xuXHRcdHRoaXMuYnJpY2tQYWRkaW5nID0gMTA7XG5cdFx0dGhpcy5icmlja09mZnNldFRvcCA9IDUwO1xuXHRcdHRoaXMuYnJpY2tPZmZzZXRMZWZ0ID0gMTYwO1xuXHRcdC8vIGluaXRpYWxpemUgYnJpY2tzXG5cdFx0dGhpcy5icmlja3MgPSBbXTtcblxuXHRcdGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IHRoaXMuYnJpY2tDb2x1bW5Db3VudDsgY29sKyspIHtcblx0XHRcdHRoaXMuYnJpY2tzW2NvbF0gPSBbXTtcblx0XHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuYnJpY2tSb3dDb3VudDsgcm93KyspIHtcblx0XHRcdFx0dGhpcy5icmlja3NbY29sXVtyb3ddID0geyB4OiAwLCB5OiAwLCBzdGF0dXM6IDEgfTsgLy8gZGVmYXVsdCBicmljayBwcm9wZXJ0aWVzXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gZHJhdyBicmljayBncmlkIHRvIHRoZSBjYW52YXNcblx0ZHJhd0JyaWNrcyhjYW52YXMpIHtcblx0XHRmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCB0aGlzLmJyaWNrQ29sdW1uQ291bnQ7IGNvbCsrKSB7XG5cdFx0XHRmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmJyaWNrUm93Q291bnQ7IHJvdysrKSB7XG5cdFx0XHRcdGxldCBicmljayA9IHRoaXMuYnJpY2tzW2NvbF1bcm93XTtcblx0XHRcdFx0aWYgKGJyaWNrLnN0YXR1cyA9PT0gMSkge1xuXHRcdFx0XHRcdC8vIGJhbGwgZGlkIG5vdCBjb2xsaWRlIHdpdGggYnJpY2tcblx0XHRcdFx0XHRsZXQgYnJpY2tYID1cblx0XHRcdFx0XHRcdGNvbCAqICh0aGlzLmJyaWNrV2lkdGggKyB0aGlzLmJyaWNrUGFkZGluZykgKyB0aGlzLmJyaWNrT2Zmc2V0TGVmdDsgLy8gb2Zmc2V0IFggcG9zaXRpb24gZnJvbSBwcmV2aW91cyBicmlja1xuXHRcdFx0XHRcdGxldCBicmlja1kgPVxuXHRcdFx0XHRcdFx0cm93ICogKHRoaXMuYnJpY2tIZWlnaHQgKyB0aGlzLmJyaWNrUGFkZGluZykgKyB0aGlzLmJyaWNrT2Zmc2V0VG9wOyAvLyBvZmZzZXQgWSBwb3NpdGlvbiBmcm9tIHByZXZpb3VzIGJyaWNrXG5cdFx0XHRcdFx0YnJpY2sueCA9IGJyaWNrWDtcblx0XHRcdFx0XHRicmljay55ID0gYnJpY2tZO1xuXHRcdFx0XHRcdGNhbnZhcy5jdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRcdFx0Y2FudmFzLmN0eC5yZWN0KGJyaWNrLngsIGJyaWNrLnksIHRoaXMuYnJpY2tXaWR0aCwgdGhpcy5icmlja0hlaWdodCk7XG5cdFx0XHRcdFx0Y2FudmFzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJyaWNrQ29sb3I7XG5cdFx0XHRcdFx0Y2FudmFzLmN0eC5maWxsKCk7XG5cdFx0XHRcdFx0Y2FudmFzLmN0eC5jbG9zZVBhdGgoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBCcmljaztcbiIsImNsYXNzIFBhZGRsZSB7XG5cdGNvbnN0cnVjdG9yKGNhbnZhcykge1xuXHRcdC8vIHBhZGRsZSBwcm9wZXJ0aWVzXG5cdFx0dGhpcy5wYWRkbGVDb2xvciA9IFwiIzAwOTVERFwiO1xuXHRcdHRoaXMucGFkZGxlSGVpZ2h0ID0gMTA7XG5cdFx0dGhpcy5wYWRkbGVXaWR0aCA9IDc1O1xuXHRcdC8vIHN0YXJ0aW5nIHBvc2l0aW9uXG5cdFx0dGhpcy5wYWRkbGVYID0gKGNhbnZhcy53aWR0aCAtIHRoaXMucGFkZGxlV2lkdGgpIC8gMjtcblx0fVxuXG5cdC8vIGRyYXcgcGFkZGxlIHRvIHRoZSBjYW52YXNcblx0ZHJhd1BhZGRsZShjYW52YXMpIHtcblx0XHRjYW52YXMuY3R4LmJlZ2luUGF0aCgpO1xuXHRcdGNhbnZhcy5jdHgucmVjdChcblx0XHRcdHRoaXMucGFkZGxlWCxcblx0XHRcdGNhbnZhcy5oZWlnaHQgLSB0aGlzLnBhZGRsZUhlaWdodCxcblx0XHRcdHRoaXMucGFkZGxlV2lkdGgsXG5cdFx0XHR0aGlzLnBhZGRsZUhlaWdodFxuXHRcdCk7XG5cdFx0Y2FudmFzLmN0eC5maWxsU3R5bGUgPSB0aGlzLnBhZGRsZUNvbG9yO1xuXHRcdGNhbnZhcy5jdHguZmlsbCgpO1xuXHRcdGNhbnZhcy5jdHguY2xvc2VQYXRoKCk7XG5cdH1cblxuXHQvLyB1cGRhdGUgcGFkZGxlIHBvc2l0aW9uXG5cdHVwZGF0ZSh4KSB7XG5cdFx0dGhpcy5wYWRkbGVYICs9IHg7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFkZGxlO1xuIiwiY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3Rvcihtb2RlKSB7XG4gICAgICAgIHRoaXMubGl2ZXMgPSBtb2RlLmxpdmVzO1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5vcHBvbmVudFNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5vcHBvbmVudExpdmVzID0gMDtcbiAgICAgICAgdGhpcy54ID0gMDtcbiAgICAgICAgdGhpcy55ID0gMDtcbiAgICB9XG5cbiAgICAvLyBkcmF3IGN1cnJlbnQgc2NvcmUgdG8gdGhlIGNhbnZhc1xuICAgIGRyYXdTY29yZShjYW52YXMpIHtcbiAgICAgICAgY2FudmFzLmN0eC5mb250ID0gXCIyNHB4IEFyaWFsXCI7XG4gICAgICAgIGNhbnZhcy5jdHguZmlsbFN0eWxlID0gXCIjMDA5NUREXCI7XG4gICAgICAgIGNhbnZhcy5jdHguZmlsbFRleHQoXCJTY29yZTogXCIgKyB0aGlzLnNjb3JlLCA4LCAyMCk7XG4gICAgICAgIGNhbnZhcy5jdHguZmlsbFRleHQoXCJPcHBvbmVudCdzIFNjb3JlOiBcIiArIHRoaXMub3Bwb25lbnRTY29yZSwgOCwgNDApO1xuICAgIH1cblxuICAgIC8vIGRyYXcgY3VycmVudCBudW1iZXIgb2YgbGl2ZXMgdG8gdGhlIGNhbnZhc1xuICAgIGRyYXdMaXZlcyhjYW52YXMpIHtcbiAgICAgICAgY2FudmFzLmN0eC5mb250ID0gXCIyNHB4IEFyaWFsXCI7XG4gICAgICAgIGNhbnZhcy5jdHguZmlsbFN0eWxlID0gXCIjMDA5NUREXCI7XG4gICAgICAgIGNhbnZhcy5jdHguZmlsbFRleHQoXCJMaXZlczogXCIgKyB0aGlzLmxpdmVzLCBjYW52YXMud2lkdGggLSA5MCwgMjApO1xuICAgICAgICBjYW52YXMuY3R4LmZpbGxUZXh0KFxuICAgICAgICAgICAgXCJPcHBvbmVudCdzIExpdmVzOiBcIiArIHRoaXMub3Bwb25lbnRMaXZlcyxcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCAtIDIxOCxcbiAgICAgICAgICAgIDQwXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gdWRwYXRlIHBsYXllciBkYXRhXG4gICAgdXBkYXRlKGxpdmVzLCB1c2VybmFtZSwgc2NvcmUpIHtcbiAgICAgICAgdGhpcy5saXZlcyArPSBsaXZlcztcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnNjb3JlICs9IHNjb3JlO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxheWVyO1xuIiwiY29uc3Qgc29ja2V0ID0gaW8uY29ubmVjdChcImh0dHBzOi8vYnJlYWtvdXQtMmQuaGVyb2t1YXBwLmNvbVwiKTsgLy8gaW5zdGF0aWF0ZSBjb25uZWN0aW9uIHRvIHNlcnZlciAtIGxvY2FsIGhvc3RcblxuZXhwb3J0IGRlZmF1bHQgc29ja2V0O1xuIiwiLy8gbW9kdWxlc1xuaW1wb3J0IENhbnZhcyBmcm9tIFwiLi9tb2R1bGVzL2NhbnZhc1wiO1xuaW1wb3J0IEJhbGwgZnJvbSBcIi4vbW9kdWxlcy9iYWxsXCI7XG5pbXBvcnQgQnJpY2sgZnJvbSBcIi4vbW9kdWxlcy9icmlja1wiO1xuaW1wb3J0IFBhZGRsZSBmcm9tIFwiLi9tb2R1bGVzL3BhZGRsZVwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9tb2R1bGVzL3BsYXllclwiO1xuaW1wb3J0IHNvY2tldCBmcm9tIFwiLi9tb2R1bGVzL2NsaWVudFwiO1xuXG4vLyBlbmFibGUgbGl2ZSByZWxvYWRcbmRvY3VtZW50LndyaXRlKFxuICAgICc8c2NyaXB0IHNyYz1cImh0dHBzOi8vJyArXG4gICAgICAgIChsb2NhdGlvbi5ob3N0IHx8IFwibG9jYWxob3N0XCIpLnNwbGl0KFwiOlwiKVswXSArXG4gICAgICAgICc6MzU3MjkvbGl2ZXJlbG9hZC5qcz9zbmlwdmVyPTFcIj48LycgK1xuICAgICAgICBcInNjcmlwdD5cIlxuKTtcblxuY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmlnaHRQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGVmdFByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gW107IC8vIGhvbGRzIGFsbCBwbGF5ZXJzIGluIHRoZSBnYW1lXG5cbiAgICAgICAgLy8gbGlzdGVuIGZvciBrZXkgcHJlc3MgYW5kIGtleSByZWxlYXNlXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmtleURvd25IYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXlVcEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgLy8gbGlzdGVuIGZvciBtb3VzZSBtb3ZlbWVudFxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgLy8gbGlzdGVuIGZvciBjaGFuZ2VzIGluIGdhbWUgbW9kZVxuICAgICAgICBlYXN5TW9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0R2FtZU1vZGUsIGZhbHNlKTtcbiAgICAgICAgbWVkaXVtTW9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0R2FtZU1vZGUsIGZhbHNlKTtcbiAgICAgICAgaGFyZE1vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbGVjdEdhbWVNb2RlLCBmYWxzZSk7XG4gICAgICAgIG1hcmF0aG9uTW9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0R2FtZU1vZGUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBpbml0aWFsaXplIHRoZSBnYW1lIG9iamVjdHMgYW5kIHRoZSBnYW1lIGxvb3BcbiAgICBpbml0KCkge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5kcmF3KGNhbnZhcykpO1xuICAgIH1cblxuICAgIC8vIG1haW4gZHJhdyBmdW5jdGlvbiBvZiB0aGUgZ2FtZSAtIGluaXRpYXRlcyBnYW1lIGxvb3AgLSBXT1JLIElOIFBST0dSRVNTXG4gICAgZHJhdyhjYW52YXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coYE1PREUgJHttb2RlLm5hbWV9YCk7XG4gICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIGJhbGwgYmVmb3JlIGRyYXdpbmcgYSBuZXcgb25lXG4gICAgICAgIGNhbnZhcy5jbGVhcigpO1xuICAgICAgICBjYW52YXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBwYWRkbGUuZHJhd1BhZGRsZShjYW52YXMpO1xuICAgICAgICBicmljay5kcmF3QnJpY2tzKGNhbnZhcyk7XG4gICAgICAgIGJhbGwuZHJhd0JhbGwoY2FudmFzKTtcbiAgICAgICAgcGxheWVyLmRyYXdTY29yZShjYW52YXMpO1xuICAgICAgICBwbGF5ZXIuZHJhd0xpdmVzKGNhbnZhcyk7XG4gICAgICAgIGNhbnZhcy5kZXRlY3RCcmlja0NvbGxpc2lvbnMoYmFsbCwgYnJpY2ssIHBsYXllcik7XG4gICAgICAgIGNhbnZhcy5kZXRlY3RFZGdlQ29sbGlzaW9ucyhiYWxsLCBwYWRkbGUsIHBsYXllcik7XG5cbiAgICAgICAgc29ja2V0LmVtaXQoXCJwbGF5ZXJTY29yZWRcIiwgcGxheWVyKTsgLy8gc2VuZCBwbGF5ZXIgZGF0YSB0byBzZXJ2ZXJcbiAgICAgICAgc29ja2V0LmVtaXQoXCJwbGF5ZXJMaWZlXCIsIHBsYXllcik7XG5cbiAgICAgICAgLy8gbW92ZSBwYWRkbGUgcmlnaHQgdW50aWwgdGhlIHJpZ2h0IGVkZ2Ugb2YgdGhlIGNhbnZhc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnJpZ2h0UHJlc3NlZCAmJlxuICAgICAgICAgICAgcGFkZGxlLnBhZGRsZVggPCBjYW52YXMud2lkdGggLSBwYWRkbGUucGFkZGxlV2lkdGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBwYWRkbGUudXBkYXRlKDcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubGVmdFByZXNzZWQgJiYgcGFkZGxlLnBhZGRsZVggPiAwKSB7XG4gICAgICAgICAgICBwYWRkbGUudXBkYXRlKC03KTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgYmFsbCdzIHBvc2l0aW9uXG4gICAgICAgIGJhbGwudXBkYXRlKCk7XG5cbiAgICAgICAgaWYgKHBhdXNlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgLy8gYW5pbWF0aW9uIGxvb3BzXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhdyhjYW52YXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjaGVjayBpZiBhIGtleSB3YXMgcHJlc3NlZFxuICAgIGtleURvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcbiAgICAgICAgICAgIC8vIHJpZ2h0IGN1cnNvciBrZXkgcHJlc3NlZFxuICAgICAgICAgICAgZy5yaWdodFByZXNzZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcpIHtcbiAgICAgICAgICAgIC8vIGxlZnQgY3Vyc29yIGtleSBwcmVzc2VkXG4gICAgICAgICAgICBnLmxlZnRQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDgwKSB7XG4gICAgICAgICAgICAvLyBwYXVzZSBrZXkgcHJlc3NlZFxuICAgICAgICAgICAgcGF1c2UgPSAhcGF1c2U7XG4gICAgICAgICAgICBpZiAocGF1c2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZy5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSA4MSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJwbGF5ZXIgcXVpdCBnYW1lXCIpO1xuICAgICAgICAgICAgYWxlcnQoXCJZb3UgcXVpdC4gR2FtZSBPdmVyIVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgYSBrZXkgd2FzIHJlbGVhc2VkXG4gICAga2V5VXBIYW5kbGVyKGUpIHtcbiAgICAgICAgLy8gcmVzZXQga2V5IHN0YXRlIHRvIGRlZmF1bHRcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcbiAgICAgICAgICAgIC8vIHJpZ2h0IGN1cnNvciBrZXkgcmVsZWFzZWRcbiAgICAgICAgICAgIGcucmlnaHRQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzNykge1xuICAgICAgICAgICAgLy8gcmlnaHQgY3Vyc29yIGtleSByZWxlYXNlZFxuICAgICAgICAgICAgZy5sZWZ0UHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gbW92ZSBwYWRkbGUgcmVsYXRpdmUgdG8gdGhlIG1vdXNlIHBvc2l0aW9uIHdpdGhpbiBjYW52YXNcbiAgICBtb3VzZU1vdmVIYW5kbGVyKGUpIHtcbiAgICAgICAgbGV0IHJlbGF0aXZlWCA9IGUuY2xpZW50WCAtIGNhbnZhcy5jYW52YXMub2Zmc2V0TGVmdDtcbiAgICAgICAgaWYgKHJlbGF0aXZlWCA+IDAgJiYgcmVsYXRpdmVYIDwgY2FudmFzLndpZHRoKSB7XG4gICAgICAgICAgICBwYWRkbGUucGFkZGxlWCA9IHJlbGF0aXZlWCAtIHBhZGRsZS5wYWRkbGVXaWR0aCAvIDI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBzZXQgdGhlIGN1cnJlbnQgZ2FtZSBpbnN0YW5jZSdzIG1vZGVcbiAgICAvLyBzZWxlY3RHYW1lTW9kZShlKSB7XG4gICAgLy8gICAgIGNvbnN0IHsgbmFtZSB9ID0gZS50YXJnZXQ7XG4gICAgLy8gICAgIGlmIChuYW1lID09PSBcImVhc3lcIikge1xuICAgIC8vICAgICAgICAgdGhpcy5tb2RlID0gXCJlYXN5XCI7XG4gICAgLy8gICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJtZWRpdW1cIikge1xuICAgIC8vICAgICAgICAgdGhpcy5tb2RlID0gXCJtZWRpdW1cIjtcbiAgICAvLyAgICAgfSBlbHNlIGlmIChuYW1lID09PSBcImhhcmRcIikge1xuICAgIC8vICAgICAgICAgdGhpcy5tb2RlID0gXCJoYXJkXCI7XG4gICAgLy8gICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICB0aGlzLm1vZGUgPSBcIm1hcmF0aG9uXCI7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG59XG5cbi8vIHBhdXNlIGZsYWdcbmxldCBwYXVzZSA9IHRydWU7XG5cbi8vIDwgPT09PT0gU1RBUlRJTkcgVEhFIEdBTUUgPT09PT0gPlxuXG5sZXQgbW9kZSA9IHtcbiAgICBuYW1lOiBcInZlcnkgZWFzeVwiLFxuICAgIGR4OiAxLjUsXG4gICAgZHk6IC0xLjUsXG4gICAgbGl2ZXM6IDVcbn07XG5cbi8vIGdhbWUgbW9kZSBidXR0b25zXG5jb25zdCBlYXN5TW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWFzeS1tb2RlLWJ0blwiKTtcbmNvbnN0IG1lZGl1bU1vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lZGl1bS1tb2RlLWJ0blwiKTtcbmNvbnN0IGhhcmRNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oYXJkLW1vZGUtYnRuXCIpO1xuY29uc3QgbWFyYXRob25Nb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYXJhdGhvbi1tb2RlLWJ0blwiKTtcblxuZnVuY3Rpb24gc2VsZWN0R2FtZU1vZGUoZSkge1xuICAgIGNvbnN0IHsgbmFtZSB9ID0gZS50YXJnZXQ7XG4gICAgaWYgKG5hbWUgPT09IFwiZWFzeVwiKSB7XG4gICAgICAgIG1vZGUgPSB7XG4gICAgICAgICAgICBuYW1lOiBcImVhc3lcIixcbiAgICAgICAgICAgIGR4OiAyLFxuICAgICAgICAgICAgZHk6IC0yLFxuICAgICAgICAgICAgbGl2ZXM6IDNcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coXCJtb2RlIGNoYW5nZWQgdG8gZWFzeVwiLCBtb2RlKTtcbiAgICAgICAgYmFsbCA9IG5ldyBCYWxsKGNhbnZhcy5oZWlnaHQsIGNhbnZhcy53aWR0aCwgbW9kZSk7XG4gICAgICAgIHBsYXllciA9IG5ldyBQbGF5ZXIobW9kZSk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSBcIm1lZGl1bVwiKSB7XG4gICAgICAgIG1vZGUgPSB7XG4gICAgICAgICAgICBuYW1lOiBcIm1lZGl1bVwiLFxuICAgICAgICAgICAgZHg6IDMsXG4gICAgICAgICAgICBkeTogLTMsXG4gICAgICAgICAgICBsaXZlczogM1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1vZGUgY2hhbmdlZCB0byBtZWRpdW1cIiwgbW9kZSk7XG4gICAgICAgIGJhbGwgPSBuZXcgQmFsbChjYW52YXMuaGVpZ2h0LCBjYW52YXMud2lkdGgsIG1vZGUpO1xuICAgICAgICBwbGF5ZXIgPSBuZXcgUGxheWVyKG1vZGUpO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJoYXJkXCIpIHtcbiAgICAgICAgbW9kZSA9IHtcbiAgICAgICAgICAgIG5hbWU6IFwiaGFyZFwiLFxuICAgICAgICAgICAgZHg6IDQsXG4gICAgICAgICAgICBkeTogLTUsXG4gICAgICAgICAgICBsaXZlczogMlxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1vZGUgY2hhbmdlZCB0byBoYXJkXCIsIG1vZGUpO1xuICAgICAgICBiYWxsID0gbmV3IEJhbGwoY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoLCBtb2RlKTtcbiAgICAgICAgcGxheWVyID0gbmV3IFBsYXllcihtb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBtb2RlID0gXCJtYXJhdGhvblwiO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1vZGUgY2hhbmdlZCB0byBtYXJhdGhvblwiLCBtb2RlKTtcbiAgICB9XG59XG5cbmNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcbmxldCBiYWxsID0gbmV3IEJhbGwoY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoLCBtb2RlKTtcbmNvbnN0IGJyaWNrID0gbmV3IEJyaWNrKGNhbnZhcyk7XG5jb25zdCBwYWRkbGUgPSBuZXcgUGFkZGxlKGNhbnZhcyk7XG5sZXQgcGxheWVyID0gbmV3IFBsYXllcihtb2RlKTtcbmNvbnN0IGcgPSBuZXcgR2FtZSgpOyAvLyBpbnN0YW50aWF0ZSBhIGdhbWVcblxuLy8gc3RvcmUgeW91ciBvcHBvbmVudCdzIHNjb3JlXG5zb2NrZXQub24oXCJvdGhlclBsYXllclNjb3JlXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBwbGF5ZXIub3Bwb25lbnRTY29yZSA9IGRhdGE7XG59KTtcblxuLy8gc3RvcmUgeW91ciBvcHBvbmVudCdzIGxpZmUgY291bnRcbnNvY2tldC5vbihcIm90aGVyUGxheWVyTGlmZVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgcGxheWVyLm9wcG9uZW50TGl2ZXMgPSBkYXRhO1xufSk7XG5cbmcuaW5pdCgpOyAvLyBzdGFydCB0aGUgZ2FtZSBsb29wXG4iXSwibmFtZXMiOlsiQ2FudmFzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsInRoaXMiLCJnZXRDb250ZXh0Iiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhclJlY3QiLCJiYWxsIiwicGFkZGxlIiwicGxheWVyIiwieSIsImR5IiwiYmFsbFJhZGl1cyIsImNoYW5nZUNvbG9yIiwieCIsInBhZGRsZVgiLCJwYWRkbGVXaWR0aCIsImxpdmVzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJkeCIsImJyaWNrIiwiY29sIiwiYnJpY2tDb2x1bW5Db3VudCIsInJvdyIsImJyaWNrUm93Q291bnQiLCJiIiwiYnJpY2tzIiwic3RhdHVzIiwiYnJpY2tXaWR0aCIsImJyaWNrSGVpZ2h0Iiwic2NvcmUiLCJCYWxsIiwibW9kZSIsImJhbGxDb2xvciIsImNvbG9yIiwiTWF0aCIsInJhbmRvbSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsImNsb3NlUGF0aCIsIkJyaWNrIiwiYnJpY2tDb2xvciIsImJyaWNrUGFkZGluZyIsImJyaWNrT2Zmc2V0VG9wIiwiYnJpY2tPZmZzZXRMZWZ0IiwiYnJpY2tYIiwiYnJpY2tZIiwicmVjdCIsIlBhZGRsZSIsInBhZGRsZUNvbG9yIiwicGFkZGxlSGVpZ2h0IiwiUGxheWVyIiwib3Bwb25lbnRTY29yZSIsIm9wcG9uZW50TGl2ZXMiLCJmb250IiwiZmlsbFRleHQiLCJ1c2VybmFtZSIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndyaXRlIiwiaG9zdCIsInNwbGl0IiwiR2FtZSIsInJpZ2h0UHJlc3NlZCIsImxlZnRQcmVzc2VkIiwicGxheWVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJrZXlEb3duSGFuZGxlciIsImtleVVwSGFuZGxlciIsIm1vdXNlTW92ZUhhbmRsZXIiLCJzZWxlY3RHYW1lTW9kZSIsIl90aGlzIiwiZHJhdyIsImxvZyIsIm5hbWUiLCJjbGVhciIsImRyYXdQYWRkbGUiLCJkcmF3QnJpY2tzIiwiZHJhd0JhbGwiLCJkcmF3U2NvcmUiLCJkcmF3TGl2ZXMiLCJkZXRlY3RCcmlja0NvbGxpc2lvbnMiLCJkZXRlY3RFZGdlQ29sbGlzaW9ucyIsImVtaXQiLCJ1cGRhdGUiLCJwYXVzZSIsImUiLCJrZXlDb2RlIiwiaW5pdCIsInJlbGF0aXZlWCIsImNsaWVudFgiLCJvZmZzZXRMZWZ0IiwiZWFzeU1vZGUiLCJxdWVyeVNlbGVjdG9yIiwibWVkaXVtTW9kZSIsImhhcmRNb2RlIiwibWFyYXRob25Nb2RlIiwidGFyZ2V0IiwiZyIsIm9uIiwiZGF0YSJdLCJtYXBwaW5ncyI6ImlYQUFNQSx5Q0FFQ0MsT0FBU0MsU0FBU0MsZUFBZSxpQkFDakNDLElBQU1DLEtBQUtKLE9BQU9LLFdBQVcsV0FDN0JDLE1BQVFGLEtBQUtKLE9BQU9NLFdBQ3BCQyxPQUFTSCxLQUFLSixPQUFPTyxzREFJckJKLElBQUlLLFVBQVUsRUFBRyxFQUFHSixLQUFLRSxNQUFPRixLQUFLRyxxREFJdEJFLEVBQU1DLEVBQVFDLEdBRTlCRixFQUFLRyxFQUFJSCxFQUFLSSxHQUFLSixFQUFLSyxjQUN0QkQsSUFBTUosRUFBS0ksS0FDWEUsZUFDS04sRUFBS0csRUFBSUgsRUFBS0ksR0FBS1QsS0FBS0csT0FBU0UsRUFBS0ssYUFFL0NMLEVBQUtPLEVBQUlOLEVBQU9PLFNBQ2hCUixFQUFLTyxFQUFJTixFQUFPTyxRQUFVUCxFQUFPUSxlQUc1QkwsSUFBTUosRUFBS0ksS0FDWEUsa0JBRUVJLFFBQ2MsSUFBakJSLEVBQU9RLGFBQ0osc0JBQ0dDLFNBQVNDLGFBRWJMLEVBQUlaLEtBQUtFLE1BQVEsSUFDakJNLEVBQUlSLEtBQUtHLE9BQVMsS0FDbEJlLEdBQUssSUFDTFQsSUFBTSxJQUNKSSxTQUFXYixLQUFLRSxNQUFRSSxFQUFPUSxhQUFlLE1BTXZEVCxFQUFLTyxFQUFJUCxFQUFLYSxHQUFLYixFQUFLSyxZQUN4QkwsRUFBS08sRUFBSVAsRUFBS2EsR0FBS2xCLEtBQUtFLE1BQVFHLEVBQUtLLGdCQUVoQ1EsSUFBTWIsRUFBS2EsS0FDWFAsNkRBSWVOLEVBQU1jLEVBQU9aLE9BRTdCLElBQUlhLEVBQU0sRUFBR0EsRUFBTUQsRUFBTUUsaUJBQWtCRCxRQUMxQyxJQUFJRSxFQUFNLEVBQUdBLEVBQU1ILEVBQU1JLGNBQWVELElBQU8sS0FDL0NFLEVBQUlMLEVBQU1NLE9BQU9MLEdBQUtFLEdBRVQsSUFBYkUsRUFBRUUsUUFJSnJCLEVBQUtPLEVBQUlZLEVB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
